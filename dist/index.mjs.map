{"version":3,"file":"index.mjs","sources":["../src/delaySignal.ts","../src/useTimeout.ts","../src/Modal.tsx","../src/FullscreenImage.tsx","../src/renderLightbox.tsx"],"sourcesContent":["import { Accessor, createComputed, createSignal, on, onCleanup, untrack } from \"solid-js\";\r\n\r\nexport default function delaySignal(readOnlySignal: Accessor<boolean>, delay: number) {\r\n    const [deferred, setDeferred] = createSignal(readOnlySignal())\r\n    let timer: number\r\n    createComputed(\r\n        on(readOnlySignal,\r\n            () => {\r\n                clearTimeout(timer)\r\n                timer = setTimeout(() => {\r\n                    setDeferred(untrack(readOnlySignal))\r\n                }, delay)\r\n            }, { defer: true }))\r\n    onCleanup(() => {\r\n        clearTimeout(timer)\r\n    })\r\n    return deferred\r\n}","import { onCleanup } from \"solid-js\"\r\n\r\nexport default function useTimeout() {\r\n    let timers: number[] = []\r\n    let timersTicked : number[] = []\r\n    const clear = () => {\r\n        timers.forEach(id => clearTimeout(id))\r\n        timers = []\r\n        timersTicked = []\r\n    }\r\n    onCleanup(clear)\r\n    const set = (handler: () => any, timeout?: number) => {\r\n        const timer = setTimeout(\r\n            () => {\r\n                handler()\r\n\r\n                if(timers.length=== timersTicked.length +1 ) {\r\n                    clear()\r\n                }else{\r\n                    timersTicked.push(timer)\r\n                }\r\n            }, timeout)\r\n        timers.push(timer)\r\n    }\r\n\r\n    return [set, clear] as const\r\n}","import { css } from \"@emotion/css\";\nimport { createEffect, createSignal, JSX, on, splitProps } from \"solid-js\";\nimport useTimeout from \"./useTimeout\";\n\nconst styleModal = css({\n    /*CSS contributor \n作者：heibaimeng\n链接：https://juejin.im/post/5cf3d3ba5188257c6b5171fd\n来源：掘金\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。 */\n    position: \"fixed\",\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: \"100%\",\n    zIndex: 9999,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    backdropFilter: 'unset',\n    backgroundColor: \"#0000\",\n    transition: \"all 500ms ease-in\",\n    \"& > div\": {\n        margin: \"0.8rem\",\n        overflow: \"auto\",\n        maxHeight: \"98vh\",\n    }\n})\n\nconst styleOpenned = css({\n    backdropFilter: 'blur(5px)',\n    backgroundColor: \"rgba(0, 0, 0, 0.50)\"\n\n})\n\nexport interface ModalProps extends Omit<JSX.HTMLAttributes<HTMLDivElement>, 'style'> {\n    open: boolean\n    onClose: () => void\n    delay?: number\n    style?: JSX.CSSProperties\n}\nexport function Modal(props: ModalProps) {\n    const [localProp, forwardProp] = splitProps(props, ['open', 'onClose', 'delay', 'style'])\n    const [setTimeout] = useTimeout()\n    const [visibility, setVisibility] = createSignal(localProp.open)\n    createEffect(on(() => localProp.open, () => {\n        if (visibility() !== localProp.open) {\n            if (localProp.open) {\n                setVisibility(true)\n            } else {\n                setTimeout(() => setVisibility(false), localProp.delay ?? 500)\n            }\n        }\n    }, { defer: true }))\n    return (<div\n        onClick={localProp.onClose}\n        style={{\n            visibility: (visibility() ? 'visible' : 'hidden'),\n            ...localProp.style\n        }}\n        classList={{ [styleModal]: true, [styleOpenned]: localProp.open }}\n        {...forwardProp}\n    />\n    )\n}","import { css } from \"@emotion/css\";\r\nimport { awaitImage } from \"await-res\";\r\nimport { batch, createComputed, createMemo, createSignal, on, onCleanup, onMount, splitProps } from \"solid-js\";\r\nimport { JSX } from \"solid-js/jsx-runtime\";\r\nimport delaySignal from \"./delaySignal\";\r\nimport { Modal } from \"./Modal\";\r\nexport interface FullscreenImageProp extends Omit<JSX.ImgHTMLAttributes<HTMLImageElement>, 'children'> {\r\n    /**\r\n     * 作为位置参照的元素\r\n     */\r\n    img?: HTMLImageElement\r\n}\r\nconst modalPadding = 10\r\n\r\nconst styleBase = css({\r\n    position: 'absolute',\r\n    top: 0, left: 0,\r\n    userSelect: 'none',\r\n    \"&::after\": {\r\n        background: 'red',\r\n        width: '100vw',\r\n        height: '100vh',\r\n        position: 'absolute',\r\n        top: 0,\r\n        left: 0,\r\n        content: '\"\"'\r\n    }\r\n})\r\n\r\nexport default function FullscreenImage(props: FullscreenImageProp) {\r\n    const [fullscreen, setFullscreen] = createSignal(false)\r\n\r\n    const [rect, setRect] = createSignal<DOMRect>()\r\n    const [targetSize, setTargetSize] = createSignal<[number, number]>()\r\n\r\n    const [localProp, propForward] = splitProps(props, ['img'])\r\n    /**\r\n     * 图片原始纵横比下的宽度\r\n     */\r\n    const [width, setWidth] = createSignal(0)\r\n    const refreshPos = () => {\r\n        setRect(localProp.img?.getBoundingClientRect())\r\n    }\r\n    const resize = () => {\r\n        const height = rect()!.height//要求与stillStyle一致\r\n        const { naturalWidth, naturalHeight } = localProp.img!\r\n\r\n        let targetHeight: number\r\n        let targetWidth: number\r\n        targetHeight = document.documentElement.clientHeight - (modalPadding * 4)\r\n        targetWidth = targetHeight * naturalWidth / naturalHeight\r\n\r\n        const availWidth = document.documentElement.clientWidth\r\n        if (targetWidth > availWidth) {\r\n            targetWidth = availWidth - (modalPadding * 4)\r\n            targetHeight = targetWidth / naturalWidth * naturalHeight\r\n        }\r\n        batch(() => {\r\n            setWidth(height * naturalWidth / naturalHeight)\r\n            setTargetSize([targetWidth, targetHeight])\r\n        })\r\n    }\r\n    const refresh = () => {\r\n        if (!localProp.img) return\r\n        batch(() => {\r\n            refreshPos();\r\n            resize()\r\n        })\r\n    }\r\n    const open = () => {\r\n        //if (!isImageReady()) return\r\n        refresh()\r\n        window.setTimeout(() => {\r\n            // 等待style提交到浏览器并生效\r\n            setEnableTransition(true)\r\n            setFullscreen(true)\r\n        })\r\n    }\r\n    const [enableTransition, setEnableTransition] = createSignal(false)\r\n    const showImage = delaySignal(fullscreen, 100)\r\n    createComputed(\r\n        on(() => localProp.img,\r\n            () => {\r\n                localProp.img && awaitImage(localProp.img).then(open)\r\n            }, { defer: true }))\r\n    onMount(() => {\r\n        window.addEventListener('scroll', refreshPos)\r\n        window.addEventListener('resize', refresh)\r\n    })\r\n    onCleanup(() => {\r\n        window.removeEventListener('scroll', refreshPos)\r\n        window.removeEventListener('resize', refresh)\r\n    })\r\n    const style = createMemo(() => {\r\n        if (!rect() || !targetSize()) {\r\n            return undefined\r\n        }\r\n        const height = (rect()!.height)\r\n        const targetWidth = targetSize()![0]\r\n        const targetHeight = targetSize()![1]\r\n        const scaleX = width()\r\n            / targetWidth\r\n        const scaleY = height / targetHeight\r\n        return {\r\n            transform: showImage() ? `translate(${(document.documentElement.clientWidth - targetWidth) / 2}px,${(document.documentElement.clientHeight - targetHeight) / 2}px)`\r\n                : `translate(${rect()!.x}px,${rect()!.y}px) scale(${scaleX},${scaleY})`,\r\n            width: `${targetWidth}px`,\r\n            height: `${targetHeight}px`,\r\n            'transform-origin': 'left top',\r\n            transition: enableTransition() && 'all 0.3s ease-in-out',\r\n        } as JSX.CSSProperties\r\n    })\r\n\r\n    // observable(style).subscribe(console.log)\r\n    return <Modal\r\n        open={fullscreen()}\r\n        onClose={() => {\r\n            setFullscreen(false)\r\n        }}>\r\n        <img\r\n            style={style()}\r\n            class={styleBase}\r\n            onTransitionEnd={!fullscreen() ? (() => {\r\n                setEnableTransition(false)\r\n            }) : undefined}\r\n            {...propForward} />\r\n    </Modal>\r\n}","import { Accessor, } from \"solid-js\";\r\nimport { MountableElement, render } from \"solid-js/web\";\r\nimport FullscreenImage from \"./FullscreenImage\";\r\n\r\nexport default function renderLightbox(img: Accessor<HTMLImageElement | undefined>, container: MountableElement) {\r\n    return render(() => <FullscreenImage src={img()?.src} img={img()!} />, container);\r\n}"],"names":["styleModal","css","position","top","bottom","left","right","width","zIndex","display","alignItems","justifyContent","backdropFilter","backgroundColor","transition","margin","overflow","maxHeight","styleOpenned","Modal","props","localProp","forwardProp","splitProps","setTimeout","useTimeout","visibility","setVisibility","createSignal","open","createEffect","on","delay","defer","_el$","_tmpl$","_$spread","_$mergeProps","onClick","onClose","style","classList","modalPadding","styleBase","userSelect","background","height","content","FullscreenImage","fullscreen","setFullscreen","rect","setRect","targetSize","setTargetSize","propForward","setWidth","refreshPos","img","getBoundingClientRect","resize","naturalWidth","naturalHeight","targetHeight","targetWidth","document","documentElement","clientHeight","availWidth","clientWidth","batch","refresh","window","setEnableTransition","enableTransition","showImage","delaySignal","createComputed","awaitImage","then","onMount","addEventListener","onCleanup","removeEventListener","createMemo","undefined","scaleX","scaleY","transform","x","y","_$createComponent","children","_$className","onTransitionEnd","renderLightbox","container","render","src"],"mappings":";;;;;AAEwB,SAAA,WAAA,CAAY,gBAAmC,KAAe,EAAA;AAClF,EAAA,MAAM,CAAC,QAAU,EAAA,WAAW,CAAI,GAAA,YAAA,CAAa,gBAAgB,CAAA,CAAA;AAC7D,EAAI,IAAA,KAAA,CAAA;AACJ,EAAA,cAAA;AAAA,IACI,EAAA;AAAA,MAAG,cAAA;AAAA,MACC,MAAM;AACF,QAAA,YAAA,CAAa,KAAK,CAAA,CAAA;AAClB,QAAA,KAAA,GAAQ,WAAW,MAAM;AACrB,UAAY,WAAA,CAAA,OAAA,CAAQ,cAAc,CAAC,CAAA,CAAA;AAAA,WACpC,KAAK,CAAA,CAAA;AAAA,OACZ;AAAA,MAAG,EAAE,OAAO,IAAK,EAAA;AAAA,KAAC;AAAA,GAAC,CAAA;AAC3B,EAAA,SAAA,CAAU,MAAM;AACZ,IAAA,YAAA,CAAa,KAAK,CAAA,CAAA;AAAA,GACrB,CAAA,CAAA;AACD,EAAO,OAAA,QAAA,CAAA;AACX;;ACfA,SAAwB,UAAa,GAAA;AACjC,EAAA,IAAI,SAAmB,EAAC,CAAA;AACxB,EAAA,IAAI,eAA0B,EAAC,CAAA;AAC/B,EAAA,MAAM,QAAQ,MAAM;AAChB,IAAA,MAAA,CAAO,OAAQ,CAAA,CAAA,EAAA,KAAM,YAAa,CAAA,EAAE,CAAC,CAAA,CAAA;AACrC,IAAA,MAAA,GAAS,EAAC,CAAA;AACV,IAAA,YAAA,GAAe,EAAC,CAAA;AAAA,GACpB,CAAA;AACA,EAAA,SAAA,CAAU,KAAK,CAAA,CAAA;AACf,EAAM,MAAA,GAAA,GAAM,CAAC,OAAA,EAAoB,OAAqB,KAAA;AAClD,IAAA,MAAM,KAAQ,GAAA,UAAA;AAAA,MACV,MAAM;AACF,QAAQ,OAAA,EAAA,CAAA;AAER,QAAA,IAAG,MAAO,CAAA,MAAA,KAAU,YAAa,CAAA,MAAA,GAAQ,CAAI,EAAA;AACzC,UAAM,KAAA,EAAA,CAAA;AAAA,SACL,MAAA;AACD,UAAA,YAAA,CAAa,KAAK,KAAK,CAAA,CAAA;AAAA,SAC3B;AAAA,OACJ;AAAA,MAAG,OAAA;AAAA,KAAO,CAAA;AACd,IAAA,MAAA,CAAO,KAAK,KAAK,CAAA,CAAA;AAAA,GACrB,CAAA;AAEA,EAAO,OAAA,CAAC,KAAK,KAAK,CAAA,CAAA;AACtB;;;ACtBA,MAAMA,UAAU,GAAGC,GAAG,CAAC;AACnB;AACJ;AACA;AACA;AACA;AACIC,EAAAA,QAAQ,EAAE,OAAO;AACjBC,EAAAA,GAAG,EAAE,CAAC;AACNC,EAAAA,MAAM,EAAE,CAAC;AACTC,EAAAA,IAAI,EAAE,CAAC;AACPC,EAAAA,KAAK,EAAE,CAAC;AACRC,EAAAA,KAAK,EAAE,MAAM;AACbC,EAAAA,MAAM,EAAE,IAAI;AACZC,EAAAA,OAAO,EAAE,MAAM;AACfC,EAAAA,UAAU,EAAE,QAAQ;AACpBC,EAAAA,cAAc,EAAE,QAAQ;AACxBC,EAAAA,cAAc,EAAE,OAAO;AACvBC,EAAAA,eAAe,EAAE,OAAO;AACxBC,EAAAA,UAAU,EAAE,mBAAmB;AAC/B,EAAA,SAAS,EAAE;AACPC,IAAAA,MAAM,EAAE,QAAQ;AAChBC,IAAAA,QAAQ,EAAE,MAAM;AAChBC,IAAAA,SAAS,EAAE,MAAA;AACf,GAAA;AACJ,CAAC,CAAC,CAAA;AAEF,MAAMC,YAAY,GAAGjB,GAAG,CAAC;AACrBW,EAAAA,cAAc,EAAE,WAAW;AAC3BC,EAAAA,eAAe,EAAE,qBAAA;AAErB,CAAC,CAAC,CAAA;AAQK,SAASM,KAAKA,CAACC,KAAiB,EAAE;AACrC,EAAA,MAAM,CAACC,SAAS,EAAEC,WAAW,CAAC,GAAGC,UAAU,CAACH,KAAK,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC,CAAA;AACzF,EAAA,MAAM,CAACI,UAAU,CAAC,GAAGC,UAAU,EAAE,CAAA;EACjC,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGC,YAAY,CAACP,SAAS,CAACQ,IAAI,CAAC,CAAA;EAChEC,YAAY,CAACC,EAAE,CAAC,MAAMV,SAAS,CAACQ,IAAI,EAAE,MAAM;AACxC,IAAA,IAAIH,UAAU,EAAE,KAAKL,SAAS,CAACQ,IAAI,EAAE;MACjC,IAAIR,SAAS,CAACQ,IAAI,EAAE;QAChBF,aAAa,CAAC,IAAI,CAAC,CAAA;AACvB,OAAC,MAAM;AACHH,QAAAA,UAAU,CAAC,MAAMG,aAAa,CAAC,KAAK,CAAC,EAAEN,SAAS,CAACW,KAAK,IAAI,GAAG,CAAC,CAAA;AAClE,OAAA;AACJ,KAAA;AACJ,GAAC,EAAE;AAAEC,IAAAA,KAAK,EAAE,IAAA;AAAK,GAAC,CAAC,CAAC,CAAA;AACpB,EAAA,OAAA,CAAA,MAAA;IAAA,MAAAC,IAAA,GAAAC,QAAA,EAAA,CAAA;IAAAC,MAAA,CAAAF,IAAA,EAAAG,UAAA,CAAA;AAAA,MAAA,IACIC,OAAOA,GAAA;QAAA,OAAEjB,SAAS,CAACkB,OAAO,CAAA;AAAA,OAAA;AAAA,MAAA,IAC1BC,KAAKA,GAAA;QAAA,OAAE;AACHd,UAAAA,UAAU,EAAGA,UAAU,EAAE,GAAG,SAAS,GAAG,QAAS;AACjD,UAAA,GAAGL,SAAS,CAACmB,KAAAA;SAChB,CAAA;AAAA,OAAA;AAAA,MAAA,IACDC,SAASA,GAAA;QAAA,OAAE;UAAE,CAACzC,UAAU,GAAG,IAAI;UAAE,CAACkB,YAAY,GAAGG,SAAS,CAACQ,IAAAA;SAAM,CAAA;AAAA,OAAA;AAAA,KAAA,EAC7DP,WAAW,CAAA,EAAA,KAAA,EAAA,KAAA,CAAA,CAAA;AAAA,IAAA,OAAAY,IAAA,CAAA;AAAA,GAAA,GAAA,CAAA;AAGvB;;;ACrDA,MAAMQ,YAAY,GAAG,EAAE,CAAA;AAEvB,MAAMC,SAAS,GAAG1C,GAAG,CAAC;AAClBC,EAAAA,QAAQ,EAAE,UAAU;AACpBC,EAAAA,GAAG,EAAE,CAAC;AAAEE,EAAAA,IAAI,EAAE,CAAC;AACfuC,EAAAA,UAAU,EAAE,MAAM;AAClB,EAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAE,KAAK;AACjBtC,IAAAA,KAAK,EAAE,OAAO;AACduC,IAAAA,MAAM,EAAE,OAAO;AACf5C,IAAAA,QAAQ,EAAE,UAAU;AACpBC,IAAAA,GAAG,EAAE,CAAC;AACNE,IAAAA,IAAI,EAAE,CAAC;AACP0C,IAAAA,OAAO,EAAE,IAAA;AACb,GAAA;AACJ,CAAC,CAAC,CAAA;AAEa,SAASC,eAAeA,CAAC5B,KAA0B,EAAE;EAChE,MAAM,CAAC6B,UAAU,EAAEC,aAAa,CAAC,GAAGtB,YAAY,CAAC,KAAK,CAAC,CAAA;EAEvD,MAAM,CAACuB,IAAI,EAAEC,OAAO,CAAC,GAAGxB,YAAY,EAAW,CAAA;EAC/C,MAAM,CAACyB,UAAU,EAAEC,aAAa,CAAC,GAAG1B,YAAY,EAAoB,CAAA;AAEpE,EAAA,MAAM,CAACP,SAAS,EAAEkC,WAAW,CAAC,GAAGhC,UAAU,CAACH,KAAK,EAAE,CAAC,KAAK,CAAC,CAAC,CAAA;AAC3D;AACJ;AACA;EACI,MAAM,CAACb,KAAK,EAAEiD,QAAQ,CAAC,GAAG5B,YAAY,CAAC,CAAC,CAAC,CAAA;EACzC,MAAM6B,UAAU,GAAGA,MAAM;IACrBL,OAAO,CAAC/B,SAAS,CAACqC,GAAG,EAAEC,qBAAqB,EAAE,CAAC,CAAA;GAClD,CAAA;EACD,MAAMC,MAAM,GAAGA,MAAM;AACjB,IAAA,MAAMd,MAAM,GAAGK,IAAI,EAAE,CAAEL,MAAM,CAAA;IAC7B,MAAM;MAAEe,YAAY;AAAEC,MAAAA,aAAAA;KAAe,GAAGzC,SAAS,CAACqC,GAAI,CAAA;AAEtD,IAAA,IAAIK,YAAoB,CAAA;AACxB,IAAA,IAAIC,WAAmB,CAAA;IACvBD,YAAY,GAAGE,QAAQ,CAACC,eAAe,CAACC,YAAY,GAAIzB,YAAY,GAAG,CAAE,CAAA;AACzEsB,IAAAA,WAAW,GAAGD,YAAY,GAAGF,YAAY,GAAGC,aAAa,CAAA;AAEzD,IAAA,MAAMM,UAAU,GAAGH,QAAQ,CAACC,eAAe,CAACG,WAAW,CAAA;IACvD,IAAIL,WAAW,GAAGI,UAAU,EAAE;AAC1BJ,MAAAA,WAAW,GAAGI,UAAU,GAAI1B,YAAY,GAAG,CAAE,CAAA;AAC7CqB,MAAAA,YAAY,GAAGC,WAAW,GAAGH,YAAY,GAAGC,aAAa,CAAA;AAC7D,KAAA;AACAQ,IAAAA,KAAK,CAAC,MAAM;AACRd,MAAAA,QAAQ,CAACV,MAAM,GAAGe,YAAY,GAAGC,aAAa,CAAC,CAAA;AAC/CR,MAAAA,aAAa,CAAC,CAACU,WAAW,EAAED,YAAY,CAAC,CAAC,CAAA;AAC9C,KAAC,CAAC,CAAA;GACL,CAAA;EACD,MAAMQ,OAAO,GAAGA,MAAM;AAClB,IAAA,IAAI,CAAClD,SAAS,CAACqC,GAAG,EAAE,OAAA;AACpBY,IAAAA,KAAK,CAAC,MAAM;AACRb,MAAAA,UAAU,EAAE,CAAA;AACZG,MAAAA,MAAM,EAAE,CAAA;AACZ,KAAC,CAAC,CAAA;GACL,CAAA;EACD,MAAM/B,IAAI,GAAGA,MAAM;AACf;AACA0C,IAAAA,OAAO,EAAE,CAAA;IACTC,MAAM,CAAChD,UAAU,CAAC,MAAM;AACpB;MACAiD,mBAAmB,CAAC,IAAI,CAAC,CAAA;MACzBvB,aAAa,CAAC,IAAI,CAAC,CAAA;AACvB,KAAC,CAAC,CAAA;GACL,CAAA;EACD,MAAM,CAACwB,gBAAgB,EAAED,mBAAmB,CAAC,GAAG7C,YAAY,CAAC,KAAK,CAAC,CAAA;AACnE,EAAA,MAAM+C,SAAS,GAAGC,WAAW,CAAC3B,UAAU,EAAE,GAAG,CAAC,CAAA;EAC9C4B,cAAc,CACV9C,EAAE,CAAC,MAAMV,SAAS,CAACqC,GAAG,EAClB,MAAM;AACFrC,IAAAA,SAAS,CAACqC,GAAG,IAAIoB,UAAU,CAACzD,SAAS,CAACqC,GAAG,CAAC,CAACqB,IAAI,CAAClD,IAAI,CAAC,CAAA;AACzD,GAAC,EAAE;AAAEI,IAAAA,KAAK,EAAE,IAAA;AAAK,GAAC,CAAC,CAAC,CAAA;AAC5B+C,EAAAA,OAAO,CAAC,MAAM;AACVR,IAAAA,MAAM,CAACS,gBAAgB,CAAC,QAAQ,EAAExB,UAAU,CAAC,CAAA;AAC7Ce,IAAAA,MAAM,CAACS,gBAAgB,CAAC,QAAQ,EAAEV,OAAO,CAAC,CAAA;AAC9C,GAAC,CAAC,CAAA;AACFW,EAAAA,SAAS,CAAC,MAAM;AACZV,IAAAA,MAAM,CAACW,mBAAmB,CAAC,QAAQ,EAAE1B,UAAU,CAAC,CAAA;AAChDe,IAAAA,MAAM,CAACW,mBAAmB,CAAC,QAAQ,EAAEZ,OAAO,CAAC,CAAA;AACjD,GAAC,CAAC,CAAA;AACF,EAAA,MAAM/B,KAAK,GAAG4C,UAAU,CAAC,MAAM;IAC3B,IAAI,CAACjC,IAAI,EAAE,IAAI,CAACE,UAAU,EAAE,EAAE;AAC1B,MAAA,OAAOgC,SAAS,CAAA;AACpB,KAAA;AACA,IAAA,MAAMvC,MAAM,GAAIK,IAAI,EAAE,CAAEL,MAAO,CAAA;AAC/B,IAAA,MAAMkB,WAAW,GAAGX,UAAU,EAAE,CAAE,CAAC,CAAC,CAAA;AACpC,IAAA,MAAMU,YAAY,GAAGV,UAAU,EAAE,CAAE,CAAC,CAAC,CAAA;AACrC,IAAA,MAAMiC,MAAM,GAAG/E,KAAK,EAAE,GAChByD,WAAW,CAAA;AACjB,IAAA,MAAMuB,MAAM,GAAGzC,MAAM,GAAGiB,YAAY,CAAA;IACpC,OAAO;MACHyB,SAAS,EAAEb,SAAS,EAAE,GAAI,CAAY,UAAA,EAAA,CAACV,QAAQ,CAACC,eAAe,CAACG,WAAW,GAAGL,WAAW,IAAI,CAAE,MAAK,CAACC,QAAQ,CAACC,eAAe,CAACC,YAAY,GAAGJ,YAAY,IAAI,CAAE,CAAA,GAAA,CAAI,GAC5J,CAAYZ,UAAAA,EAAAA,IAAI,EAAE,CAAEsC,CAAE,CAAKtC,GAAAA,EAAAA,IAAI,EAAE,CAAEuC,CAAE,CAAYJ,UAAAA,EAAAA,MAAO,CAAGC,CAAAA,EAAAA,MAAO,CAAE,CAAA,CAAA;MAC3EhF,KAAK,EAAG,CAAEyD,EAAAA,WAAY,CAAG,EAAA,CAAA;MACzBlB,MAAM,EAAG,CAAEiB,EAAAA,YAAa,CAAG,EAAA,CAAA;AAC3B,MAAA,kBAAkB,EAAE,UAAU;AAC9BjD,MAAAA,UAAU,EAAE4D,gBAAgB,EAAE,IAAI,sBAAA;KACrC,CAAA;AACL,GAAC,CAAC,CAAA;;AAEF;EACA,OAAAiB,eAAA,CAAQxE,KAAK,EAAA;AAAA,IAAA,IACTU,IAAIA,GAAA;MAAA,OAAEoB,UAAU,EAAE,CAAA;AAAA,KAAA;IAClBV,OAAO,EAAEA,MAAM;MACXW,aAAa,CAAC,KAAK,CAAC,CAAA;KACvB;AAAA,IAAA,IAAA0C,QAAA,GAAA;MAAA,MAAA1D,IAAA,GAAAC,MAAA,EAAA,CAAA;MAAA0D,SAAA,CAAA3D,IAAA,EAGUS,SAAS,CAAA,CAAA;MAAAP,MAAA,CAAAF,IAAA,EAAAG,UAAA,CAAA;AAAA,QAAA,IADhBG,KAAKA,GAAA;UAAA,OAAEA,KAAK,EAAE,CAAA;AAAA,SAAA;AAAA,QAAA,IAEdsD,eAAeA,GAAA;AAAA,UAAA,OAAE,CAAC7C,UAAU,EAAE,GAAI,MAAM;YACpCwB,mBAAmB,CAAC,KAAK,CAAC,CAAA;AAC9B,WAAC,GAAIY,SAAS,CAAA;AAAA,SAAA;AAAA,OAAA,EACV9B,WAAW,CAAA,EAAA,KAAA,EAAA,KAAA,CAAA,CAAA;AAAA,MAAA,OAAArB,IAAA,CAAA;AAAA,KAAA;AAAA,GAAA,CAAA,CAAA;AAE3B;;AC3He,SAAS6D,cAAcA,CAACrC,GAA2C,EAAEsC,SAA2B,EAAE;AAC7G,EAAA,OAAOC,MAAM,CAAC,MAAAN,eAAA,CAAO3C,eAAe,EAAA;AAAA,IAAA,IAACkD,GAAGA,GAAA;AAAA,MAAA,OAAExC,GAAG,EAAE,EAAEwC,GAAG,CAAA;AAAA,KAAA;AAAA,IAAA,IAAExC,GAAGA,GAAA;MAAA,OAAEA,GAAG,EAAE,CAAA;AAAA,KAAA;GAAK,CAAA,EAAEsC,SAAS,CAAC,CAAA;AACrF;;;;"}